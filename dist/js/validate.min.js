function extend(t,e){return e&&t&&Object.keys(e).forEach(function(s){"object"==typeof t[s]?t[s]=extend(t[s],e[s]):t[s]=e[s]}),t}function ValidateForm(t,e){this.form=t,this.options=extend({errorClass:"error",successClass:"success",rules:{required:/^[a-zA-Zà-ÿÀ-ß]+$/,email:/^[-._a-z0-9]+@(?:[a-z0-9][-a-z0-9]+\.)+[a-z]{2,6}$/,telephone:/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/}},e),this.init()}ValidateForm.prototype={init:function(){this.findElements(),this.setListener()},findElements:function(){this.els=this.form.querySelectorAll("[data-pattern]")},debounce:function(t,e,s){var i;return function(){var a=this,n=arguments,r=function(){i=null,s||t.apply(a,n)},o=s&&!i;clearTimeout(i),i=setTimeout(r,e),o&&t.apply(a,n)}},setListener:function(){var t=this;this.keyupHandler=this.debounce(function(e){"input"===e.target.tagName.toLocaleLowerCase()&&t.checkField(e.target)},500),this.form.addEventListener("click",function(e){"button"===e.target.tagName.toLocaleLowerCase()&&(t.validate(),t.isValid||e.preventDefault())}),this.form.addEventListener("keyup",this.keyupHandler)},validate:function(){this.isValid=!0,Array.prototype.forEach.call(this.els,this.checkField.bind(this))},checkField:function(t){var e,s;e=null!=t.getAttribute("required")||t.value.length||t.selectedIndex,s=this.options.rules[t.getAttribute("data-pattern")],"function"==typeof s?this.setState(s(t),e,t):this.setState(!s.test(t.value),e,t)},setState:function(t,e,s){e||s.classList.remove(this.options.errorClass),e&&(t?(this.isValid=!1,s.classList.add(this.options.errorClass)):s.classList.remove(this.options.errorClass)),e&&(t===!1?(this.isValid=!1,s.classList.add(this.options.successClass)):s.classList.remove(this.options.successClass))}},new ValidateForm(document.querySelector("#form"),{errorClass:"fail",successClass:"success",rules:{}});